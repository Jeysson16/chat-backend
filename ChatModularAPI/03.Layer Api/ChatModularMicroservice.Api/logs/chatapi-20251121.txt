[2025-11-21 00:19:26.532 -05:00 ERR] Connection id "0HNH8L9AF3P7J", Request id "0HNH8L9AF3P7J:00000002": An unhandled exception was thrown by the application. {"EventId":{"Id":13,"Name":"ApplicationError"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel","RequestId":"0HNH8L9AF3P7J:00000002","RequestPath":"/api/v1/auth/login"}
System.InvalidOperationException: Unable to resolve service for type 'ChatModularMicroservice.Repository.IUsuarioRepository' while attempting to activate 'ChatModularMicroservice.Domain.AuthService'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method342(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
[2025-11-21 00:19:29.143 -05:00 ERR] Connection id "0HNH8L9AF3P7J", Request id "0HNH8L9AF3P7J:00000003": An unhandled exception was thrown by the application. {"EventId":{"Id":13,"Name":"ApplicationError"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel","RequestId":"0HNH8L9AF3P7J:00000003","RequestPath":"/api/v1/auth/login"}
System.InvalidOperationException: Unable to resolve service for type 'ChatModularMicroservice.Repository.IUsuarioRepository' while attempting to activate 'ChatModularMicroservice.Domain.AuthService'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method342(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
[2025-11-21 00:21:51.435 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-21 00:21:51.475 -05:00 INF] Servidor escuchando en: http://localhost:5405;http://localhost:5406 {}
[2025-11-21 00:22:43.559 -05:00 ERR] Connection id "0HNH8NNVNLDOC", Request id "0HNH8NNVNLDOC:00000002": An unhandled exception was thrown by the application. {"EventId":{"Id":13,"Name":"ApplicationError"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel","RequestId":"0HNH8NNVNLDOC:00000002","RequestPath":"/api/v1/auth/login"}
System.InvalidOperationException: Unable to resolve service for type 'ChatModularMicroservice.Shared.Configs.IConnectionFactory' while attempting to activate 'ChatModularMicroservice.Infrastructure.UsuarioRepository'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method45(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
[2025-11-21 00:26:44.646 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-21 00:26:44.685 -05:00 INF] Servidor escuchando en: http://localhost:5405;http://localhost:5406 {}
[2025-11-21 10:53:52.805 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-21 10:53:52.836 -05:00 INF] Servidor escuchando en: http://localhost:5405;http://localhost:5406 {}
[2025-11-21 11:03:35.632 -05:00 INF] AppRegistros no existe, retornando configuración por defecto para token: AT_6cbeb6faba662bffb1e9b0cdc3a96670 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.AppRegistroRepository","ActionId":"aa87b438-c66c-4721-a901-ea685a0e0843","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JH:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH92U2UV0JH"}
[2025-11-21 11:03:35.651 -05:00 INF] AppRegistros no existe, retornando configuración por defecto para: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.AppRegistroRepository","ActionId":"aa87b438-c66c-4721-a901-ea685a0e0843","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JH:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH92U2UV0JH"}
[2025-11-21 11:03:35.655 -05:00 INF] Login especial JSANCHEZ detectado - usando usuario hardcoded {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"aa87b438-c66c-4721-a901-ea685a0e0843","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JH:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH92U2UV0JH"}
[2025-11-21 11:03:35.658 -05:00 INF] Validación de contraseña especial JSANCHEZ: true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"aa87b438-c66c-4721-a901-ea685a0e0843","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JH:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH92U2UV0JH"}
[2025-11-21 11:03:35.663 -05:00 INF] Generating access token for user 1000000001 with role: ADMIN {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"aa87b438-c66c-4721-a901-ea685a0e0843","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JH:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH92U2UV0JH"}
[2025-11-21 11:03:35.735 -05:00 INF] Generated token with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"aa87b438-c66c-4721-a901-ea685a0e0843","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JH:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH92U2UV0JH"}
[2025-11-21 11:03:37.750 -05:00 INF] Login exitoso para usuario: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"aa87b438-c66c-4721-a901-ea685a0e0843","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JH:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH92U2UV0JH"}
[2025-11-21 11:05:52.323 -05:00 ERR] Connection id "0HNH92U2UV0JJ", Request id "0HNH92U2UV0JJ:00000002": An unhandled exception was thrown by the application. {"EventId":{"Id":13,"Name":"ApplicationError"},"SourceContext":"Microsoft.AspNetCore.Server.Kestrel","RequestId":"0HNH92U2UV0JJ:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024"}
System.InvalidOperationException: Unable to resolve service for type 'ChatModularMicroservice.Repository.IConfiguracionAplicacionUnificadaRepository' while attempting to activate 'ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method61(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.InvokeCore(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
[2025-11-21 11:05:52.377 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"y_doA3yWIkw7F1XWG5wSKQ","RequestId":"0HNH92U2UV0JK:00000001","RequestPath":"/chathub","ConnectionId":"0HNH92U2UV0JK"}
[2025-11-21 11:05:52.386 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"848ac168-a324-498f-aec2-1cc63f8699cb","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JI:00000002","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH92U2UV0JI"}
[2025-11-21 11:05:52.410 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"y_doA3yWIkw7F1XWG5wSKQ","RequestId":"0HNH92U2UV0JK:00000001","RequestPath":"/chathub","ConnectionId":"0HNH92U2UV0JK"}
[2025-11-21 11:05:52.414 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"y_doA3yWIkw7F1XWG5wSKQ","RequestId":"0HNH92U2UV0JK:00000001","RequestPath":"/chathub","ConnectionId":"0HNH92U2UV0JK"}
[2025-11-21 11:05:52.421 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection y_doA3yWIkw7F1XWG5wSKQ {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"y_doA3yWIkw7F1XWG5wSKQ","RequestId":"0HNH92U2UV0JK:00000001","RequestPath":"/chathub"}
[2025-11-21 11:05:52.428 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"ada24cf6-8733-470c-8cb2-8c764e97473e","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JJ:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH92U2UV0JJ"}
[2025-11-21 11:05:52.428 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"8d033bc0-12e4-44ae-9ee8-5506f53b25cd","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JL:00000002","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH92U2UV0JL"}
[2025-11-21 11:05:52.432 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"ada24cf6-8733-470c-8cb2-8c764e97473e","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JJ:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH92U2UV0JJ"}
[2025-11-21 11:05:52.438 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"8d033bc0-12e4-44ae-9ee8-5506f53b25cd","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JL:00000002","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH92U2UV0JL"}
[2025-11-21 11:05:53.335 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"8d033bc0-12e4-44ae-9ee8-5506f53b25cd","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JL:00000002","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH92U2UV0JL"}
[2025-11-21 11:05:53.345 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"8d033bc0-12e4-44ae-9ee8-5506f53b25cd","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH92U2UV0JL:00000002","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH92U2UV0JL"}
[2025-11-21 11:11:53.383 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection y_doA3yWIkw7F1XWG5wSKQ {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"y_doA3yWIkw7F1XWG5wSKQ","RequestId":"0HNH92U2UV0JK:00000001","RequestPath":"/chathub"}
[2025-11-21 11:12:20.409 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-21 11:12:20.449 -05:00 INF] Servidor escuchando en: http://localhost:5405;http://localhost:5406 {}
[2025-11-21 11:34:09.383 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:09.417 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"-HqSPvONUfyNFURFfAWIOg","RequestId":"0HNH93F5ORCKS:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCKS"}
[2025-11-21 11:34:09.429 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"9385a785-23d0-4a02-a21c-be05aa904911","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKQ:00000002","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH93F5ORCKQ"}
[2025-11-21 11:34:09.429 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:09.449 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"-HqSPvONUfyNFURFfAWIOg","RequestId":"0HNH93F5ORCKS:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCKS"}
[2025-11-21 11:34:09.452 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"-HqSPvONUfyNFURFfAWIOg","RequestId":"0HNH93F5ORCKS:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCKS"}
[2025-11-21 11:34:09.454 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:09.456 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection -HqSPvONUfyNFURFfAWIOg {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"-HqSPvONUfyNFURFfAWIOg","RequestId":"0HNH93F5ORCKS:00000001","RequestPath":"/chathub"}
[2025-11-21 11:34:09.459 -05:00 INF] Ejecutando stored procedure (lista): sp_configuracion_aplicacion_obtener {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:10.970 -05:00 ERR] Error ejecutando stored procedure sp_configuracion_aplicacion_obtener: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 11:34:10.995 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:11.034 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:11.034 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKQ:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKQ"}
[2025-11-21 11:34:11.040 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:11.045 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKQ:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKQ"}
[2025-11-21 11:34:11.630 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKQ:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKQ"}
[2025-11-21 11:34:11.637 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKQ:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKQ"}
[2025-11-21 11:34:56.383 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection -HqSPvONUfyNFURFfAWIOg {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"-HqSPvONUfyNFURFfAWIOg","RequestId":"0HNH93F5ORCKS:00000001","RequestPath":"/chathub"}
[2025-11-21 11:34:56.777 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"9385a785-23d0-4a02-a21c-be05aa904911","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKQ:00000006","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH93F5ORCKQ"}
[2025-11-21 11:34:56.786 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:56.790 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:56.793 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:56.796 -05:00 INF] Ejecutando stored procedure (lista): sp_configuracion_aplicacion_obtener {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:56.898 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"GNHHwJ6jxO1yFJaiOu4cIA","RequestId":"0HNH93F5ORCKT:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCKT"}
[2025-11-21 11:34:56.901 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"GNHHwJ6jxO1yFJaiOu4cIA","RequestId":"0HNH93F5ORCKT:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCKT"}
[2025-11-21 11:34:56.905 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"GNHHwJ6jxO1yFJaiOu4cIA","RequestId":"0HNH93F5ORCKT:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCKT"}
[2025-11-21 11:34:56.908 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection GNHHwJ6jxO1yFJaiOu4cIA {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"GNHHwJ6jxO1yFJaiOu4cIA","RequestId":"0HNH93F5ORCKT:00000001","RequestPath":"/chathub"}
[2025-11-21 11:34:56.994 -05:00 ERR] Error ejecutando stored procedure sp_configuracion_aplicacion_obtener: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 11:34:57.001 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:57.023 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000008","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:57.027 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKQ:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKQ"}
[2025-11-21 11:34:57.027 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKR:00000008","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCKR"}
[2025-11-21 11:34:57.030 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKQ:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKQ"}
[2025-11-21 11:34:57.321 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKQ:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKQ"}
[2025-11-21 11:34:57.325 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKQ:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKQ"}
[2025-11-21 11:41:01.234 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection GNHHwJ6jxO1yFJaiOu4cIA {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"GNHHwJ6jxO1yFJaiOu4cIA","RequestId":"0HNH93F5ORCKT:00000001","RequestPath":"/chathub"}
[2025-11-21 11:41:01.544 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"9385a785-23d0-4a02-a21c-be05aa904911","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKU:00000002","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH93F5ORCKU"}
[2025-11-21 11:41:01.554 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKV"}
[2025-11-21 11:41:01.558 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKV"}
[2025-11-21 11:41:01.561 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKV"}
[2025-11-21 11:41:01.564 -05:00 INF] Ejecutando stored procedure (lista): sp_configuracion_aplicacion_obtener {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKV"}
[2025-11-21 11:41:01.631 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"3p4v2J7qCODWqVkNoU7NEw","RequestId":"0HNH93F5ORCL0:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL0"}
[2025-11-21 11:41:01.636 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"3p4v2J7qCODWqVkNoU7NEw","RequestId":"0HNH93F5ORCL0:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL0"}
[2025-11-21 11:41:01.641 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"3p4v2J7qCODWqVkNoU7NEw","RequestId":"0HNH93F5ORCL0:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL0"}
[2025-11-21 11:41:01.649 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection 3p4v2J7qCODWqVkNoU7NEw {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"3p4v2J7qCODWqVkNoU7NEw","RequestId":"0HNH93F5ORCL0:00000001","RequestPath":"/chathub"}
[2025-11-21 11:41:02.259 -05:00 ERR] Error ejecutando stored procedure sp_configuracion_aplicacion_obtener: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKV"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 11:41:02.271 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCKV"}
[2025-11-21 11:41:02.290 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKV:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCKV"}
[2025-11-21 11:41:02.293 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKU:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKU"}
[2025-11-21 11:41:02.293 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKV:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCKV"}
[2025-11-21 11:41:02.296 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKU:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKU"}
[2025-11-21 11:41:02.620 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKU:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKU"}
[2025-11-21 11:41:02.624 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCKU:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCKU"}
[2025-11-21 11:52:59.488 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection 3p4v2J7qCODWqVkNoU7NEw {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"3p4v2J7qCODWqVkNoU7NEw","RequestId":"0HNH93F5ORCL0:00000001","RequestPath":"/chathub"}
[2025-11-21 11:52:59.872 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"9385a785-23d0-4a02-a21c-be05aa904911","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000002","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:52:59.879 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:52:59.882 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:52:59.885 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:52:59.888 -05:00 INF] Ejecutando stored procedure (lista): sp_configuracion_aplicacion_obtener {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:52:59.944 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"wsdF2iHVfUG4nZz1y-CDqQ","RequestId":"0HNH93F5ORCL3:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL3"}
[2025-11-21 11:52:59.947 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"wsdF2iHVfUG4nZz1y-CDqQ","RequestId":"0HNH93F5ORCL3:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL3"}
[2025-11-21 11:52:59.950 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"wsdF2iHVfUG4nZz1y-CDqQ","RequestId":"0HNH93F5ORCL3:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL3"}
[2025-11-21 11:52:59.954 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection wsdF2iHVfUG4nZz1y-CDqQ {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"wsdF2iHVfUG4nZz1y-CDqQ","RequestId":"0HNH93F5ORCL3:00000001","RequestPath":"/chathub"}
[2025-11-21 11:53:00.636 -05:00 ERR] Error ejecutando stored procedure sp_configuracion_aplicacion_obtener: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL2"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 11:53:00.645 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:53:00.667 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:53:00.671 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:53:00.672 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:00.678 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:01.286 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:01.298 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:14.345 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection wsdF2iHVfUG4nZz1y-CDqQ {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"wsdF2iHVfUG4nZz1y-CDqQ","RequestId":"0HNH93F5ORCL3:00000001","RequestPath":"/chathub"}
[2025-11-21 11:53:14.702 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"9385a785-23d0-4a02-a21c-be05aa904911","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000006","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:14.716 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000008","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:14.719 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000008","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:14.722 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000008","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:14.725 -05:00 INF] Ejecutando stored procedure (lista): sp_configuracion_aplicacion_obtener {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000008","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:14.762 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"mk-7AzD4NPvCvyNGlyg7vg","RequestId":"0HNH93F5ORCL4:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL4"}
[2025-11-21 11:53:14.765 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"mk-7AzD4NPvCvyNGlyg7vg","RequestId":"0HNH93F5ORCL4:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL4"}
[2025-11-21 11:53:14.768 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"mk-7AzD4NPvCvyNGlyg7vg","RequestId":"0HNH93F5ORCL4:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL4"}
[2025-11-21 11:53:14.770 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection mk-7AzD4NPvCvyNGlyg7vg {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"mk-7AzD4NPvCvyNGlyg7vg","RequestId":"0HNH93F5ORCL4:00000001","RequestPath":"/chathub"}
[2025-11-21 11:53:14.963 -05:00 ERR] Error ejecutando stored procedure sp_configuracion_aplicacion_obtener: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000008","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 11:53:14.968 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:00000008","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:14.990 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:0000000A","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:14.993 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:0000000A","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:53:14.995 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000006","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:53:14.999 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000006","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:53:15.214 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000006","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:53:15.218 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000006","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:54:48.516 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection mk-7AzD4NPvCvyNGlyg7vg {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"mk-7AzD4NPvCvyNGlyg7vg","RequestId":"0HNH93F5ORCL4:00000001","RequestPath":"/chathub"}
[2025-11-21 11:54:49.169 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"9385a785-23d0-4a02-a21c-be05aa904911","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:00000008","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:54:49.179 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:0000000C","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:54:49.182 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:0000000C","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:54:49.185 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:0000000C","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:54:49.189 -05:00 INF] Ejecutando stored procedure (lista): sp_configuracion_aplicacion_obtener {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:0000000C","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:54:49.269 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"149I_WPceKfHkTHeU1-i-g","RequestId":"0HNH93F5ORCL5:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL5"}
[2025-11-21 11:54:49.272 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"149I_WPceKfHkTHeU1-i-g","RequestId":"0HNH93F5ORCL5:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL5"}
[2025-11-21 11:54:49.275 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"149I_WPceKfHkTHeU1-i-g","RequestId":"0HNH93F5ORCL5:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL5"}
[2025-11-21 11:54:49.279 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection 149I_WPceKfHkTHeU1-i-g {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"149I_WPceKfHkTHeU1-i-g","RequestId":"0HNH93F5ORCL5:00000001","RequestPath":"/chathub"}
[2025-11-21 11:54:49.592 -05:00 ERR] Error ejecutando stored procedure sp_configuracion_aplicacion_obtener: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:0000000C","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 11:54:49.599 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:0000000C","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:54:49.619 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:0000000E","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:54:49.624 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:0000000A","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:54:49.624 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL1:0000000E","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCL1"}
[2025-11-21 11:54:49.626 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:0000000A","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:54:50.095 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:0000000A","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:54:50.104 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL2:0000000A","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL2"}
[2025-11-21 11:58:29.556 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection 149I_WPceKfHkTHeU1-i-g {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"149I_WPceKfHkTHeU1-i-g","RequestId":"0HNH93F5ORCL5:00000001","RequestPath":"/chathub"}
[2025-11-21 11:58:30.010 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"9385a785-23d0-4a02-a21c-be05aa904911","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL6:00000002","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH93F5ORCL6"}
[2025-11-21 11:58:30.020 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:30.023 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:30.027 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:30.030 -05:00 INF] Ejecutando stored procedure (lista): sp_configuracion_aplicacion_obtener {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:30.125 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"v4iFMwRhHKFpo6aX_JeynQ","RequestId":"0HNH93F5ORCL8:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL8"}
[2025-11-21 11:58:30.129 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"v4iFMwRhHKFpo6aX_JeynQ","RequestId":"0HNH93F5ORCL8:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL8"}
[2025-11-21 11:58:30.132 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"v4iFMwRhHKFpo6aX_JeynQ","RequestId":"0HNH93F5ORCL8:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL8"}
[2025-11-21 11:58:30.136 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection v4iFMwRhHKFpo6aX_JeynQ {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"v4iFMwRhHKFpo6aX_JeynQ","RequestId":"0HNH93F5ORCL8:00000001","RequestPath":"/chathub"}
[2025-11-21 11:58:30.804 -05:00 ERR] Error ejecutando stored procedure sp_configuracion_aplicacion_obtener: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 11:58:30.812 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:30.833 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:30.838 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:30.839 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL6:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL6"}
[2025-11-21 11:58:30.844 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL6:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL6"}
[2025-11-21 11:58:31.131 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL6:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL6"}
[2025-11-21 11:58:31.138 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL6:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL6"}
[2025-11-21 11:58:41.040 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection v4iFMwRhHKFpo6aX_JeynQ {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"v4iFMwRhHKFpo6aX_JeynQ","RequestId":"0HNH93F5ORCL8:00000001","RequestPath":"/chathub"}
[2025-11-21 11:58:41.503 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"9385a785-23d0-4a02-a21c-be05aa904911","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL6:00000006","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH93F5ORCL6"}
[2025-11-21 11:58:41.513 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:41.516 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:41.519 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:41.522 -05:00 INF] Ejecutando stored procedure (lista): sp_configuracion_aplicacion_obtener {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:41.566 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"4DWHf7YtKmgJIMG6HASsPA","RequestId":"0HNH93F5ORCL9:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL9"}
[2025-11-21 11:58:41.569 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"4DWHf7YtKmgJIMG6HASsPA","RequestId":"0HNH93F5ORCL9:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL9"}
[2025-11-21 11:58:41.572 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"4DWHf7YtKmgJIMG6HASsPA","RequestId":"0HNH93F5ORCL9:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCL9"}
[2025-11-21 11:58:41.575 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection 4DWHf7YtKmgJIMG6HASsPA {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"4DWHf7YtKmgJIMG6HASsPA","RequestId":"0HNH93F5ORCL9:00000001","RequestPath":"/chathub"}
[2025-11-21 11:58:41.674 -05:00 ERR] Error ejecutando stored procedure sp_configuracion_aplicacion_obtener: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 11:58:41.680 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000006","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:41.701 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000008","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:41.705 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL7:00000008","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCL7"}
[2025-11-21 11:58:41.706 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL6:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL6"}
[2025-11-21 11:58:41.710 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL6:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL6"}
[2025-11-21 11:58:41.927 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL6:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL6"}
[2025-11-21 11:58:41.930 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCL6:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCL6"}
[2025-11-21 13:23:54.817 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection 4DWHf7YtKmgJIMG6HASsPA {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"4DWHf7YtKmgJIMG6HASsPA","RequestId":"0HNH93F5ORCL9:00000001","RequestPath":"/chathub"}
[2025-11-21 13:23:55.176 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"9385a785-23d0-4a02-a21c-be05aa904911","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLA:00000002","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH93F5ORCLA"}
[2025-11-21 13:23:55.184 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLB:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCLB"}
[2025-11-21 13:23:55.195 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLB:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCLB"}
[2025-11-21 13:23:55.203 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLB:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCLB"}
[2025-11-21 13:23:55.207 -05:00 INF] Ejecutando stored procedure (lista): sp_configuracion_aplicacion_obtener {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLB:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCLB"}
[2025-11-21 13:23:55.263 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"pG2X2ghY1KlV-e_VHU07ow","RequestId":"0HNH93F5ORCLC:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCLC"}
[2025-11-21 13:23:55.266 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"pG2X2ghY1KlV-e_VHU07ow","RequestId":"0HNH93F5ORCLC:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCLC"}
[2025-11-21 13:23:55.270 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"pG2X2ghY1KlV-e_VHU07ow","RequestId":"0HNH93F5ORCLC:00000001","RequestPath":"/chathub","ConnectionId":"0HNH93F5ORCLC"}
[2025-11-21 13:23:55.273 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection pG2X2ghY1KlV-e_VHU07ow {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"pG2X2ghY1KlV-e_VHU07ow","RequestId":"0HNH93F5ORCLC:00000001","RequestPath":"/chathub"}
[2025-11-21 13:23:56.535 -05:00 ERR] Error ejecutando stored procedure sp_configuracion_aplicacion_obtener: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLB:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCLB"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 13:23:56.542 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"ecce8d64-17ef-4607-8c04-bed9dc14da8c","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLB:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH93F5ORCLB"}
[2025-11-21 13:23:56.561 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLB:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCLB"}
[2025-11-21 13:23:56.564 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"33809a18-f001-4b25-ac1e-a9d8f769d0a2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLB:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH93F5ORCLB"}
[2025-11-21 13:23:56.565 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLA:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCLA"}
[2025-11-21 13:23:56.571 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLA:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCLA"}
[2025-11-21 13:23:57.130 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLA:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCLA"}
[2025-11-21 13:23:57.136 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"6e97d093-c2d0-4c64-85e0-f16f1763d77c","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH93F5ORCLA:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH93F5ORCLA"}
[2025-11-21 13:43:37.505 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection pG2X2ghY1KlV-e_VHU07ow {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"pG2X2ghY1KlV-e_VHU07ow","RequestId":"0HNH93F5ORCLC:00000001","RequestPath":"/chathub"}
[2025-11-21 13:43:44.788 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-21 13:43:44.821 -05:00 INF] Servidor escuchando en: http://localhost:5405;http://localhost:5406 {}
[2025-11-21 13:43:45.061 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"74BI_MG8cb_kwmbBaeUFSg","RequestId":"0HNH95NJ6FJHS:00000001","RequestPath":"/chathub","ConnectionId":"0HNH95NJ6FJHS"}
[2025-11-21 13:43:45.083 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"74BI_MG8cb_kwmbBaeUFSg","RequestId":"0HNH95NJ6FJHS:00000001","RequestPath":"/chathub","ConnectionId":"0HNH95NJ6FJHS"}
[2025-11-21 13:43:45.088 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"74BI_MG8cb_kwmbBaeUFSg","RequestId":"0HNH95NJ6FJHS:00000001","RequestPath":"/chathub","ConnectionId":"0HNH95NJ6FJHS"}
[2025-11-21 13:43:45.091 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection 74BI_MG8cb_kwmbBaeUFSg {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"74BI_MG8cb_kwmbBaeUFSg","RequestId":"0HNH95NJ6FJHS:00000001","RequestPath":"/chathub"}
[2025-11-21 13:46:59.350 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection 74BI_MG8cb_kwmbBaeUFSg {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"74BI_MG8cb_kwmbBaeUFSg","RequestId":"0HNH95NJ6FJHS:00000001","RequestPath":"/chathub"}
[2025-11-21 13:46:59.699 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJHV"}
[2025-11-21 13:46:59.700 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"5a82618f-fcd3-4cc4-9409-76913f137e15","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHU:00000002","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH95NJ6FJHU"}
[2025-11-21 13:46:59.704 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJHV"}
[2025-11-21 13:46:59.711 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJHV"}
[2025-11-21 13:46:59.717 -05:00 INF] Ejecutando stored procedure (lista): sp_configuracion_aplicacion_obtener {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJHV"}
[2025-11-21 13:46:59.776 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"bjEpSZHBvRZgeEDhZh7Row","RequestId":"0HNH95NJ6FJI0:00000001","RequestPath":"/chathub","ConnectionId":"0HNH95NJ6FJI0"}
[2025-11-21 13:46:59.823 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763741015, exp:1764000215, iat:1763741015, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"bjEpSZHBvRZgeEDhZh7Row","RequestId":"0HNH95NJ6FJI0:00000001","RequestPath":"/chathub","ConnectionId":"0HNH95NJ6FJI0"}
[2025-11-21 13:46:59.826 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"bjEpSZHBvRZgeEDhZh7Row","RequestId":"0HNH95NJ6FJI0:00000001","RequestPath":"/chathub","ConnectionId":"0HNH95NJ6FJI0"}
[2025-11-21 13:46:59.829 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection bjEpSZHBvRZgeEDhZh7Row {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"bjEpSZHBvRZgeEDhZh7Row","RequestId":"0HNH95NJ6FJI0:00000001","RequestPath":"/chathub"}
[2025-11-21 13:47:00.603 -05:00 ERR] Error ejecutando stored procedure sp_configuracion_aplicacion_obtener: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJHV"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 13:47:00.613 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHV:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJHV"}
[2025-11-21 13:47:00.645 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"5d0ac85d-655d-49c3-b100-8d0e175515fc","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHU:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH95NJ6FJHU"}
[2025-11-21 13:47:00.645 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"9d648343-bf76-4546-a366-91c2dfa21e3e","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHV:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH95NJ6FJHV"}
[2025-11-21 13:47:00.649 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"5d0ac85d-655d-49c3-b100-8d0e175515fc","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHU:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH95NJ6FJHU"}
[2025-11-21 13:47:00.653 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"9d648343-bf76-4546-a366-91c2dfa21e3e","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHV:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH95NJ6FJHV"}
[2025-11-21 13:47:01.444 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"5d0ac85d-655d-49c3-b100-8d0e175515fc","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHU:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH95NJ6FJHU"}
[2025-11-21 13:47:01.454 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"5d0ac85d-655d-49c3-b100-8d0e175515fc","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJHU:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH95NJ6FJHU"}
[2025-11-21 14:13:38.086 -05:00 INF] Buscando usuario por código: admin {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI5:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI5"}
[2025-11-21 14:13:38.118 -05:00 INF] GetByUserCodeAsync: Buscando usuario por código: admin {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI5:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI5"}
[2025-11-21 14:13:38.122 -05:00 INF] GetByUserCodeAsync: Verificando si es JSANCHEZ - userCode='admin', ToUpper='ADMIN' {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI5:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI5"}
[2025-11-21 14:13:38.126 -05:00 INF] GetByUserCodeAsync: No es JSANCHEZ, continuando con búsqueda normal {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI5:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI5"}
[2025-11-21 14:13:38.130 -05:00 INF] GetByEmailAsync: Buscando usuario por email en athlete_profiles: admin {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI5:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI5"}
[2025-11-21 14:13:39.672 -05:00 INF] GetByEmailAsync: Usuario no encontrado por email: admin {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI5:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI5"}
[2025-11-21 14:13:39.683 -05:00 INF] GetByUsernameAsync: Buscando usuario por username (como email) en athlete_profiles: admin {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI5:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI5"}
[2025-11-21 14:13:39.937 -05:00 INF] GetByUsernameAsync: Usuario no encontrado por username: admin {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI5:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI5"}
[2025-11-21 14:13:40.191 -05:00 WRN] Usuario no encontrado por UserId: admin {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI5:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI5"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"22P02","details":null,"hint":null,"message":"invalid input syntax for type uuid: \"admin\""}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at Supabase.Postgrest.Helpers.MakeRequest[T](ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, Func`1 getHeaders, CancellationToken cancellationToken)
   at Supabase.Postgrest.Table`1.Single(CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.UsuarioRepository.GetByUserCodeAsync(String userCode) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\UsuarioRepository.cs:line 780
[2025-11-21 14:13:40.203 -05:00 INF] Resultado búsqueda usuario: encontrado=false {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI5:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI5"}
[2025-11-21 14:13:40.206 -05:00 WRN] Login fallido: usuario no encontrado o inactivo. cUsuarioCodigo=admin {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI5:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI5"}
[2025-11-21 14:39:37.957 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection bjEpSZHBvRZgeEDhZh7Row {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"bjEpSZHBvRZgeEDhZh7Row","RequestId":"0HNH95NJ6FJI0:00000001","RequestPath":"/chathub"}
[2025-11-21 14:39:47.461 -05:00 INF] AppRegistros no existe, retornando configuración por defecto para token: AT_6cbeb6faba662bffb1e9b0cdc3a96670 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.AppRegistroRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:47.468 -05:00 INF] AppRegistros no existe, retornando configuración por defecto para: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.AppRegistroRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:47.471 -05:00 INF] Login especial JSANCHEZ detectado - usando usuario hardcoded {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:47.476 -05:00 INF] Validación de contraseña especial JSANCHEZ: false {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:47.478 -05:00 WRN] Login fallido: contraseña inválida para usuario JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:52.647 -05:00 INF] AppRegistros no existe, retornando configuración por defecto para token: AT_6cbeb6faba662bffb1e9b0cdc3a96670 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.AppRegistroRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000004","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:52.653 -05:00 INF] AppRegistros no existe, retornando configuración por defecto para: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.AppRegistroRepository","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000004","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:52.656 -05:00 INF] Login especial JSANCHEZ detectado - usando usuario hardcoded {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000004","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:52.659 -05:00 INF] Validación de contraseña especial JSANCHEZ: true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000004","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:52.663 -05:00 INF] Generating access token for user 1000000001 with role: ADMIN {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000004","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:52.679 -05:00 INF] Generated token with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000004","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:53.537 -05:00 INF] Login exitoso para usuario: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"6197e688-eb71-442e-a452-3b57c4023093","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000004","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:56.815 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"5a82618f-fcd3-4cc4-9409-76913f137e15","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000006","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:56.825 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJI7"}
[2025-11-21 14:39:56.829 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJI7"}
[2025-11-21 14:39:56.834 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJI7"}
[2025-11-21 14:39:56.834 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"cY0KZyFndkK2jezHxaiROg","RequestId":"0HNH95NJ6FJI8:00000001","RequestPath":"/chathub","ConnectionId":"0HNH95NJ6FJI8"}
[2025-11-21 14:39:56.839 -05:00 INF] Ejecutando stored procedure (lista): sp_configuracion_aplicacion_obtener {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJI7"}
[2025-11-21 14:39:56.845 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763753992, exp:1764013192, iat:1763753992, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"cY0KZyFndkK2jezHxaiROg","RequestId":"0HNH95NJ6FJI8:00000001","RequestPath":"/chathub","ConnectionId":"0HNH95NJ6FJI8"}
[2025-11-21 14:39:56.852 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"cY0KZyFndkK2jezHxaiROg","RequestId":"0HNH95NJ6FJI8:00000001","RequestPath":"/chathub","ConnectionId":"0HNH95NJ6FJI8"}
[2025-11-21 14:39:56.854 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection cY0KZyFndkK2jezHxaiROg {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"cY0KZyFndkK2jezHxaiROg","RequestId":"0HNH95NJ6FJI8:00000001","RequestPath":"/chathub"}
[2025-11-21 14:39:57.137 -05:00 ERR] Error ejecutando stored procedure sp_configuracion_aplicacion_obtener: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJI7"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.sp_configuracion_aplicacion_obtener with parameter p_app_codigo or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":"Perhaps you meant to call the function public.sp_aplicaciones_crear","message":"Could not find the function public.sp_configuracion_aplicacion_obtener(p_app_codigo) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 14:39:57.142 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"74d97962-27cc-4d8e-98a7-ae5b6119eb93","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI7:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH95NJ6FJI7"}
[2025-11-21 14:39:57.158 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"9d648343-bf76-4546-a366-91c2dfa21e3e","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI7:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH95NJ6FJI7"}
[2025-11-21 14:39:57.161 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"5d0ac85d-655d-49c3-b100-8d0e175515fc","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:57.161 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"9d648343-bf76-4546-a366-91c2dfa21e3e","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI7:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH95NJ6FJI7"}
[2025-11-21 14:39:57.164 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"5d0ac85d-655d-49c3-b100-8d0e175515fc","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:57.933 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"5d0ac85d-655d-49c3-b100-8d0e175515fc","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:39:57.938 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"5d0ac85d-655d-49c3-b100-8d0e175515fc","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH95NJ6FJI6:00000008","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH95NJ6FJI6"}
[2025-11-21 14:43:25.639 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-21 14:43:25.674 -05:00 INF] Servidor escuchando en: http://localhost:5405;http://localhost:5406 {}
[2025-11-21 14:43:57.374 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"2f380455-3f9c-4855-891b-b7d069535216","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8R:00000002","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH96P6F8F8R"}
[2025-11-21 14:43:57.374 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8S:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8S"}
[2025-11-21 14:43:57.382 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"lf3dDdlNzyusRBRX7H0JpQ","RequestId":"0HNH96P6F8F8T:00000001","RequestPath":"/chathub","ConnectionId":"0HNH96P6F8F8T"}
[2025-11-21 14:43:57.387 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8S:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8S"}
[2025-11-21 14:43:57.393 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8S:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8S"}
[2025-11-21 14:43:57.397 -05:00 INF] Ejecutando stored procedure (lista): 
                SELECT 
                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,
                    ca.nAplicacionesId as AplicacionesId,
                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,
                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,
                    ca.bPermitirAdjuntos as PermitirAdjuntos,
                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,
                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,
                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,
                    ca.bPermitirEmojis as PermitirEmojis,
                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,
                    ca.bPermitirNotificaciones as PermitirNotificaciones,
                    ca.bRequiereAutenticacion as RequiereAutenticacion,
                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,
                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,
                    ca.cModoGestionContactos as ModoGestionContactos,
                    ca.cUrlApiPersonas as UrlApiPersonas,
                    ca.bSincronizarContactos as SincronizarContactos,
                    ca.nTiempoCacheContactos as TiempoCacheContactos,
                    ca.dFechaCreacion as FechaCreacion,
                    ca.dFechaActualizacion as FechaActualizacion,
                    ca.bEsActiva as EsActiva
                FROM ConfiguracionAplicacionUnificada ca
                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id
                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true
                LIMIT 1 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8S:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8S"}
[2025-11-21 14:43:57.401 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763753992, exp:1764013192, iat:1763753992, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"lf3dDdlNzyusRBRX7H0JpQ","RequestId":"0HNH96P6F8F8T:00000001","RequestPath":"/chathub","ConnectionId":"0HNH96P6F8F8T"}
[2025-11-21 14:43:57.403 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"lf3dDdlNzyusRBRX7H0JpQ","RequestId":"0HNH96P6F8F8T:00000001","RequestPath":"/chathub","ConnectionId":"0HNH96P6F8F8T"}
[2025-11-21 14:43:57.406 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection lf3dDdlNzyusRBRX7H0JpQ {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"lf3dDdlNzyusRBRX7H0JpQ","RequestId":"0HNH96P6F8F8T:00000001","RequestPath":"/chathub"}
[2025-11-21 14:43:58.319 -05:00 ERR] Error ejecutando stored procedure 
                SELECT 
                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,
                    ca.nAplicacionesId as AplicacionesId,
                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,
                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,
                    ca.bPermitirAdjuntos as PermitirAdjuntos,
                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,
                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,
                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,
                    ca.bPermitirEmojis as PermitirEmojis,
                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,
                    ca.bPermitirNotificaciones as PermitirNotificaciones,
                    ca.bRequiereAutenticacion as RequiereAutenticacion,
                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,
                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,
                    ca.cModoGestionContactos as ModoGestionContactos,
                    ca.cUrlApiPersonas as UrlApiPersonas,
                    ca.bSincronizarContactos as SincronizarContactos,
                    ca.nTiempoCacheContactos as TiempoCacheContactos,
                    ca.dFechaCreacion as FechaCreacion,
                    ca.dFechaActualizacion as FechaActualizacion,
                    ca.bEsActiva as EsActiva
                FROM ConfiguracionAplicacionUnificada ca
                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id
                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true
                LIMIT 1: {"code":"PGRST202","details":"Searched for the function public.\n                SELECT \n                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,\n                    ca.nAplicacionesId as AplicacionesId,\n                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,\n                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,\n                    ca.bPermitirAdjuntos as PermitirAdjuntos,\n                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,\n                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,\n                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,\n                    ca.bPermitirEmojis as PermitirEmojis,\n                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,\n                    ca.bPermitirNotificaciones as PermitirNotificaciones,\n                    ca.bRequiereAutenticacion as RequiereAutenticacion,\n                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,\n                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,\n                    ca.cModoGestionContactos as ModoGestionContactos,\n                    ca.cUrlApiPersonas as UrlApiPersonas,\n                    ca.bSincronizarContactos as SincronizarContactos,\n                    ca.nTiempoCacheContactos as TiempoCacheContactos,\n                    ca.dFechaCreacion as FechaCreacion,\n                    ca.dFechaActualizacion as FechaActualizacion,\n                    ca.bEsActiva as EsActiva\n                FROM ConfiguracionAplicacionUnificada ca\n                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id\n                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true\n                LIMIT 1 with parameter codigoAplicacion or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":null,"message":"Could not find the function public.\n                SELECT \n                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,\n                    ca.nAplicacionesId as AplicacionesId,\n                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,\n                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,\n                    ca.bPermitirAdjuntos as PermitirAdjuntos,\n                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,\n                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,\n                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,\n                    ca.bPermitirEmojis as PermitirEmojis,\n                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,\n                    ca.bPermitirNotificaciones as PermitirNotificaciones,\n                    ca.bRequiereAutenticacion as RequiereAutenticacion,\n                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,\n                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,\n                    ca.cModoGestionContactos as ModoGestionContactos,\n                    ca.cUrlApiPersonas as UrlApiPersonas,\n                    ca.bSincronizarContactos as SincronizarContactos,\n                    ca.nTiempoCacheContactos as TiempoCacheContactos,\n                    ca.dFechaCreacion as FechaCreacion,\n                    ca.dFechaActualizacion as FechaActualizacion,\n                    ca.bEsActiva as EsActiva\n                FROM ConfiguracionAplicacionUnificada ca\n                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id\n                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true\n                LIMIT 1(codigoAplicacion) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8S:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8S"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.\n                SELECT \n                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,\n                    ca.nAplicacionesId as AplicacionesId,\n                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,\n                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,\n                    ca.bPermitirAdjuntos as PermitirAdjuntos,\n                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,\n                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,\n                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,\n                    ca.bPermitirEmojis as PermitirEmojis,\n                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,\n                    ca.bPermitirNotificaciones as PermitirNotificaciones,\n                    ca.bRequiereAutenticacion as RequiereAutenticacion,\n                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,\n                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,\n                    ca.cModoGestionContactos as ModoGestionContactos,\n                    ca.cUrlApiPersonas as UrlApiPersonas,\n                    ca.bSincronizarContactos as SincronizarContactos,\n                    ca.nTiempoCacheContactos as TiempoCacheContactos,\n                    ca.dFechaCreacion as FechaCreacion,\n                    ca.dFechaActualizacion as FechaActualizacion,\n                    ca.bEsActiva as EsActiva\n                FROM ConfiguracionAplicacionUnificada ca\n                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id\n                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true\n                LIMIT 1 with parameter codigoAplicacion or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":null,"message":"Could not find the function public.\n                SELECT \n                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,\n                    ca.nAplicacionesId as AplicacionesId,\n                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,\n                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,\n                    ca.bPermitirAdjuntos as PermitirAdjuntos,\n                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,\n                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,\n                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,\n                    ca.bPermitirEmojis as PermitirEmojis,\n                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,\n                    ca.bPermitirNotificaciones as PermitirNotificaciones,\n                    ca.bRequiereAutenticacion as RequiereAutenticacion,\n                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,\n                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,\n                    ca.cModoGestionContactos as ModoGestionContactos,\n                    ca.cUrlApiPersonas as UrlApiPersonas,\n                    ca.bSincronizarContactos as SincronizarContactos,\n                    ca.nTiempoCacheContactos as TiempoCacheContactos,\n                    ca.dFechaCreacion as FechaCreacion,\n                    ca.dFechaActualizacion as FechaActualizacion,\n                    ca.bEsActiva as EsActiva\n                FROM ConfiguracionAplicacionUnificada ca\n                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id\n                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true\n                LIMIT 1(codigoAplicacion) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 14:43:58.339 -05:00 WRN] No se encontró configuración para la aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8S:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8S"}
[2025-11-21 14:43:58.342 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8S:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8S"}
[2025-11-21 14:43:58.376 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"a78d9725-4078-4359-8468-119ce81352c2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8R:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH96P6F8F8R"}
[2025-11-21 14:43:58.376 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"faa04e9e-b71e-4725-a827-c45adef4d164","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8S:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH96P6F8F8S"}
[2025-11-21 14:43:58.380 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"a78d9725-4078-4359-8468-119ce81352c2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8R:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH96P6F8F8R"}
[2025-11-21 14:43:58.384 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"faa04e9e-b71e-4725-a827-c45adef4d164","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8S:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH96P6F8F8S"}
[2025-11-21 14:43:58.747 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"a78d9725-4078-4359-8468-119ce81352c2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8R:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH96P6F8F8R"}
[2025-11-21 14:43:58.751 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"a78d9725-4078-4359-8468-119ce81352c2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8R:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH96P6F8F8R"}
[2025-11-21 15:55:11.041 -05:00 INF] User Jeysson Sanchez disconnected from app SICOM_CHAT_2024 with connection lf3dDdlNzyusRBRX7H0JpQ {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"lf3dDdlNzyusRBRX7H0JpQ","RequestId":"0HNH96P6F8F8T:00000001","RequestPath":"/chathub"}
[2025-11-21 15:55:11.450 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"2f380455-3f9c-4855-891b-b7d069535216","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F90:00000002","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH96P6F8F90"}
[2025-11-21 15:55:11.450 -05:00 INF] Obteniendo configuración para aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8V:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8V"}
[2025-11-21 15:55:11.456 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8V:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8V"}
[2025-11-21 15:55:11.459 -05:00 INF] Obteniendo configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8V:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8V"}
[2025-11-21 15:55:11.462 -05:00 INF] Ejecutando stored procedure (lista): 
                SELECT 
                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,
                    ca.nAplicacionesId as AplicacionesId,
                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,
                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,
                    ca.bPermitirAdjuntos as PermitirAdjuntos,
                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,
                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,
                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,
                    ca.bPermitirEmojis as PermitirEmojis,
                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,
                    ca.bPermitirNotificaciones as PermitirNotificaciones,
                    ca.bRequiereAutenticacion as RequiereAutenticacion,
                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,
                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,
                    ca.cModoGestionContactos as ModoGestionContactos,
                    ca.cUrlApiPersonas as UrlApiPersonas,
                    ca.bSincronizarContactos as SincronizarContactos,
                    ca.nTiempoCacheContactos as TiempoCacheContactos,
                    ca.dFechaCreacion as FechaCreacion,
                    ca.dFechaActualizacion as FechaActualizacion,
                    ca.bEsActiva as EsActiva
                FROM ConfiguracionAplicacionUnificada ca
                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id
                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true
                LIMIT 1 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8V:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8V"}
[2025-11-21 15:55:11.526 -05:00 INF] SignalR connection attempt - AppCode: SICOM_CHAT_2024, HasAuthHeader: true {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"uE7iS2z2ox7hGooCcc0Urg","RequestId":"0HNH96P6F8F91:00000001","RequestPath":"/chathub","ConnectionId":"0HNH96P6F8F91"}
[2025-11-21 15:55:11.529 -05:00 INF] Token validated with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jsanchez@example.com, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sanchez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:ADMIN, username:JSANCHEZ, per_codigo:, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024, nbf:1763753992, exp:1764013192, iat:1763753992, iss:ChatModularAPI, aud:ChatModularAPI {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"uE7iS2z2ox7hGooCcc0Urg","RequestId":"0HNH96P6F8F91:00000001","RequestPath":"/chathub","ConnectionId":"0HNH96P6F8F91"}
[2025-11-21 15:55:11.531 -05:00 INF] Extracted user info - UserId: 1000000001, UserName: Jeysson Sanchez {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"uE7iS2z2ox7hGooCcc0Urg","RequestId":"0HNH96P6F8F91:00000001","RequestPath":"/chathub","ConnectionId":"0HNH96P6F8F91"}
[2025-11-21 15:55:11.534 -05:00 INF] User Jeysson Sanchez connected to app SICOM_CHAT_2024 with connection uE7iS2z2ox7hGooCcc0Urg {"SourceContext":"ChatModularMicroservice.Api.Hubs.ChatHub","TransportConnectionId":"uE7iS2z2ox7hGooCcc0Urg","RequestId":"0HNH96P6F8F91:00000001","RequestPath":"/chathub"}
[2025-11-21 15:55:12.699 -05:00 ERR] Error ejecutando stored procedure 
                SELECT 
                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,
                    ca.nAplicacionesId as AplicacionesId,
                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,
                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,
                    ca.bPermitirAdjuntos as PermitirAdjuntos,
                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,
                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,
                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,
                    ca.bPermitirEmojis as PermitirEmojis,
                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,
                    ca.bPermitirNotificaciones as PermitirNotificaciones,
                    ca.bRequiereAutenticacion as RequiereAutenticacion,
                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,
                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,
                    ca.cModoGestionContactos as ModoGestionContactos,
                    ca.cUrlApiPersonas as UrlApiPersonas,
                    ca.bSincronizarContactos as SincronizarContactos,
                    ca.nTiempoCacheContactos as TiempoCacheContactos,
                    ca.dFechaCreacion as FechaCreacion,
                    ca.dFechaActualizacion as FechaActualizacion,
                    ca.bEsActiva as EsActiva
                FROM ConfiguracionAplicacionUnificada ca
                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id
                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true
                LIMIT 1: {"code":"PGRST202","details":"Searched for the function public.\n                SELECT \n                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,\n                    ca.nAplicacionesId as AplicacionesId,\n                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,\n                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,\n                    ca.bPermitirAdjuntos as PermitirAdjuntos,\n                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,\n                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,\n                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,\n                    ca.bPermitirEmojis as PermitirEmojis,\n                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,\n                    ca.bPermitirNotificaciones as PermitirNotificaciones,\n                    ca.bRequiereAutenticacion as RequiereAutenticacion,\n                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,\n                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,\n                    ca.cModoGestionContactos as ModoGestionContactos,\n                    ca.cUrlApiPersonas as UrlApiPersonas,\n                    ca.bSincronizarContactos as SincronizarContactos,\n                    ca.nTiempoCacheContactos as TiempoCacheContactos,\n                    ca.dFechaCreacion as FechaCreacion,\n                    ca.dFechaActualizacion as FechaActualizacion,\n                    ca.bEsActiva as EsActiva\n                FROM ConfiguracionAplicacionUnificada ca\n                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id\n                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true\n                LIMIT 1 with parameter codigoAplicacion or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":null,"message":"Could not find the function public.\n                SELECT \n                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,\n                    ca.nAplicacionesId as AplicacionesId,\n                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,\n                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,\n                    ca.bPermitirAdjuntos as PermitirAdjuntos,\n                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,\n                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,\n                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,\n                    ca.bPermitirEmojis as PermitirEmojis,\n                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,\n                    ca.bPermitirNotificaciones as PermitirNotificaciones,\n                    ca.bRequiereAutenticacion as RequiereAutenticacion,\n                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,\n                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,\n                    ca.cModoGestionContactos as ModoGestionContactos,\n                    ca.cUrlApiPersonas as UrlApiPersonas,\n                    ca.bSincronizarContactos as SincronizarContactos,\n                    ca.nTiempoCacheContactos as TiempoCacheContactos,\n                    ca.dFechaCreacion as FechaCreacion,\n                    ca.dFechaActualizacion as FechaActualizacion,\n                    ca.bEsActiva as EsActiva\n                FROM ConfiguracionAplicacionUnificada ca\n                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id\n                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true\n                LIMIT 1(codigoAplicacion) in the schema cache"} {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8V:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8V"}
Supabase.Postgrest.Exceptions.PostgrestException: {"code":"PGRST202","details":"Searched for the function public.\n                SELECT \n                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,\n                    ca.nAplicacionesId as AplicacionesId,\n                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,\n                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,\n                    ca.bPermitirAdjuntos as PermitirAdjuntos,\n                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,\n                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,\n                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,\n                    ca.bPermitirEmojis as PermitirEmojis,\n                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,\n                    ca.bPermitirNotificaciones as PermitirNotificaciones,\n                    ca.bRequiereAutenticacion as RequiereAutenticacion,\n                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,\n                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,\n                    ca.cModoGestionContactos as ModoGestionContactos,\n                    ca.cUrlApiPersonas as UrlApiPersonas,\n                    ca.bSincronizarContactos as SincronizarContactos,\n                    ca.nTiempoCacheContactos as TiempoCacheContactos,\n                    ca.dFechaCreacion as FechaCreacion,\n                    ca.dFechaActualizacion as FechaActualizacion,\n                    ca.bEsActiva as EsActiva\n                FROM ConfiguracionAplicacionUnificada ca\n                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id\n                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true\n                LIMIT 1 with parameter codigoAplicacion or with a single unnamed json/jsonb parameter, but no matches were found in the schema cache.","hint":null,"message":"Could not find the function public.\n                SELECT \n                    ca.nConfiguracionAplicacionId as ConfiguracionAplicacionId,\n                    ca.nAplicacionesId as AplicacionesId,\n                    ca.nMaxTamanoArchivo as MaxTamanoArchivo,\n                    ca.cTiposArchivosPermitidos as TiposArchivosPermitidos,\n                    ca.bPermitirAdjuntos as PermitirAdjuntos,\n                    ca.nMaxCantidadAdjuntos as MaxCantidadAdjuntos,\n                    ca.bPermitirVisualizacionAdjuntos as PermitirVisualizacionAdjuntos,\n                    ca.nMaxLongitudMensaje as MaxLongitudMensaje,\n                    ca.bPermitirEmojis as PermitirEmojis,\n                    ca.bPermitirMensajesVoz as PermitirMensajesVoz,\n                    ca.bPermitirNotificaciones as PermitirNotificaciones,\n                    ca.bRequiereAutenticacion as RequiereAutenticacion,\n                    ca.bPermitirMensajesAnonimos as PermitirMensajesAnonimos,\n                    ca.nTiempoExpiracionSesion as TiempoExpiracionSesion,\n                    ca.cModoGestionContactos as ModoGestionContactos,\n                    ca.cUrlApiPersonas as UrlApiPersonas,\n                    ca.bSincronizarContactos as SincronizarContactos,\n                    ca.nTiempoCacheContactos as TiempoCacheContactos,\n                    ca.dFechaCreacion as FechaCreacion,\n                    ca.dFechaActualizacion as FechaActualizacion,\n                    ca.bEsActiva as EsActiva\n                FROM ConfiguracionAplicacionUnificada ca\n                INNER JOIN AppRegistro ar ON ca.nAplicacionesId = ar.id\n                WHERE ar.cAppCodigo = @codigoAplicacion AND ca.bEsActiva = true\n                LIMIT 1(codigoAplicacion) in the schema cache"}
   at Supabase.Postgrest.Helpers.MakeRequest(ClientOptions clientOptions, HttpMethod method, String url, JsonSerializerSettings serializerSettings, Object data, Dictionary`2 headers, CancellationToken cancellationToken)
   at ChatModularMicroservice.Infrastructure.Repositories.SupabaseRepository.ExecuteStoredProcedureListAsync[T](String procedureName, Object parameters, String clientName) in D:\Chat\ChatBackend\ChatModularAPI\01.Layer Infrastructure\ChatModularMicroservice.Infrastructure\SupabaseRepository.cs:line 101
[2025-11-21 15:55:12.712 -05:00 WRN] No se encontró configuración para la aplicación con código: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.Repositories.ConfiguracionAplicacionUnificadaRepository","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8V:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8V"}
[2025-11-21 15:55:12.714 -05:00 WRN] No se encontró configuración para aplicación: SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.ConfiguracionAplicacionUnificadaService","ActionId":"e00d7af3-3343-4a52-9b3c-47b97ac7c1a2","ActionName":"ChatModularMicroservice.Api.Controllers.ConfiguracionAplicacionUnificadaController.ObtenerConfiguracionPorCodigo (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8V:00000002","RequestPath":"/api/v1/configuracion-aplicacion/por-codigo/SICOM_CHAT_2024","ConnectionId":"0HNH96P6F8F8V"}
[2025-11-21 15:55:12.735 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"faa04e9e-b71e-4725-a827-c45adef4d164","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8V:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH96P6F8F8V"}
[2025-11-21 15:55:12.736 -05:00 INF] Listando contactos para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"a78d9725-4078-4359-8468-119ce81352c2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F90:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH96P6F8F90"}
[2025-11-21 15:55:12.738 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"faa04e9e-b71e-4725-a827-c45adef4d164","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetMisContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F8V:00000004","RequestPath":"/api/v1/contactos/my-contacts","ConnectionId":"0HNH96P6F8F8V"}
[2025-11-21 15:55:12.741 -05:00 INF] Consultando tabla chatcontactos para usuario 1000000001 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"a78d9725-4078-4359-8468-119ce81352c2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F90:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH96P6F8F90"}
[2025-11-21 15:55:13.199 -05:00 INF] Listando solicitudes pendientes para usuario 1000000001 en empresa 1 y aplicación SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"a78d9725-4078-4359-8468-119ce81352c2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F90:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH96P6F8F90"}
[2025-11-21 15:55:13.202 -05:00 INF] Ejecutando stored procedure (lista): usp_contactos_listarsolicitudespendientes {"SourceContext":"ChatModularMicroservice.Infrastructure.ContactoSupabaseRepository","ActionId":"a78d9725-4078-4359-8468-119ce81352c2","ActionName":"ChatModularMicroservice.Api.Controllers.ContactoController.GetEstadisticasContactos (ChatModularMicroservice.Api)","RequestId":"0HNH96P6F8F90:00000004","RequestPath":"/api/v1/contactos/stats","ConnectionId":"0HNH96P6F8F90"}
[2025-11-21 15:56:13.634 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-21 15:56:13.670 -05:00 INF] Servidor escuchando en: http://localhost:5405;http://localhost:5406 {}
