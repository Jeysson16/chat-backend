[2025-11-15 19:10:48.297 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 19:10:48.369 -05:00 INF] Servidor escuchando en: http://127.0.0.1:5405;http://localhost:5405 {}
[2025-11-15 19:10:48.553 -05:00 ERR] Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"SourceContext":"Microsoft.Extensions.Hosting.Internal.Host"}
System.IO.IOException: Failed to bind to address http://127.0.0.1:5405: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
[2025-11-15 19:10:48.574 -05:00 FTL] La aplicación falló al iniciar {}
System.IO.IOException: Failed to bind to address http://127.0.0.1:5405: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.Main(String[] args) in D:\Chat\ChatBackend\ChatModularAPI\03.Layer Api\ChatModularMicroservice.Api\Program.cs:line 168
[2025-11-15 19:15:37.529 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 19:15:37.568 -05:00 INF] Servidor escuchando en: http://127.0.0.1:5406 {}
[2025-11-15 19:18:28.038 -05:00 INF] HTTP Request - Method: POST, Path: /api/v1/auth/login, Body: {"cUsuarioCodigo":"testuser","cUsuarioContra":"testpass","bRecordarme":false,"cTokenAcceso":"AT_6cbeb6faba662bffb1e9b0cdc3a96670","cTokenSecreto":"ST_0b2c702f3fd200f0fc9ddb02624a21bc9d8be4fa96672504","cPerJurCodigo":"DEFAULT"} {"SourceContext":"ChatModularMicroservice.Api.Middleware.RequestBodyMiddleware","RequestId":"0HNH4KML5D4C1:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C1"}
[2025-11-15 19:18:28.051 -05:00 INF] Verificando ruta: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C1:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C1"}
[2025-11-15 19:18:28.052 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C1:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C1"}
[2025-11-15 19:18:28.056 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C1:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C1"}
[2025-11-15 19:18:28.058 -05:00 INF] Ruta pública detectada: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C1:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C1"}
[2025-11-15 19:18:31.960 -05:00 INF] Buscando usuario por código: testuser {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"9ee2d64f-dcac-4bc6-b672-310d7056ec63","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C1:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C1"}
[2025-11-15 19:18:33.745 -05:00 INF] Resultado búsqueda usuario: encontrado=false {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"9ee2d64f-dcac-4bc6-b672-310d7056ec63","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C1:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C1"}
[2025-11-15 19:18:33.750 -05:00 WRN] Login fallido: usuario no encontrado o inactivo. cUsuarioCodigo=testuser {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"9ee2d64f-dcac-4bc6-b672-310d7056ec63","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C1:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C1"}
[2025-11-15 20:05:03.278 -05:00 INF] HTTP Request - Method: POST, Path: /api/v1/auth/login, Body: {"cUsuarioCodigo":"JSANCHEZ","cUsuarioContra":"jeysson12345","bRecordarme":false,"cTokenAcceso":"AT_6cbeb6faba662bffb1e9b0cdc3a96670","cTokenSecreto":"ST_0b2c702f3fd200f0fc9ddb02624a21bc9d8be4fa96672504","cPerJurCodigo":"DEFAULT"} {"SourceContext":"ChatModularMicroservice.Api.Middleware.RequestBodyMiddleware","RequestId":"0HNH4KML5D4C2:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C2"}
[2025-11-15 20:05:03.281 -05:00 INF] Verificando ruta: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C2:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C2"}
[2025-11-15 20:05:03.283 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C2:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C2"}
[2025-11-15 20:05:03.284 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C2:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C2"}
[2025-11-15 20:05:03.286 -05:00 INF] Ruta pública detectada: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C2:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C2"}
[2025-11-15 20:05:04.850 -05:00 INF] Buscando usuario por código: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"9ee2d64f-dcac-4bc6-b672-310d7056ec63","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C2:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C2"}
[2025-11-15 20:05:05.535 -05:00 INF] Resultado búsqueda usuario: encontrado=true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"9ee2d64f-dcac-4bc6-b672-310d7056ec63","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C2:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C2"}
[2025-11-15 20:05:05.826 -05:00 INF] Validación de contraseña con BCrypt para usuario JSANCHEZ: true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"9ee2d64f-dcac-4bc6-b672-310d7056ec63","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C2:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C2"}
[2025-11-15 20:05:06.315 -05:00 INF] Login exitoso para usuario: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"9ee2d64f-dcac-4bc6-b672-310d7056ec63","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C2:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C2"}
[2025-11-15 20:25:52.641 -05:00 INF] HTTP Request - Method: POST, Path: /api/v1/auth/login, Body: {"cUsuarioCodigo":"JSANCHEZ","cUsuarioContra":"jeysson12345","bRecordarme":true,"cTokenAcceso":"AT_6cbeb6faba662bffb1e9b0cdc3a96670","cTokenSecreto":"ST_0b2c702f3fd200f0fc9ddb02624a21bc9d8be4fa96672504","cPerJurCodigo":"DEFAULT"} {"SourceContext":"ChatModularMicroservice.Api.Middleware.RequestBodyMiddleware","RequestId":"0HNH4KML5D4C4:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:52.646 -05:00 INF] Verificando ruta: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C4:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:52.651 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C4:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:52.654 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C4:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:52.655 -05:00 INF] Ruta pública detectada: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C4:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:54.210 -05:00 INF] Buscando usuario por código: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"9ee2d64f-dcac-4bc6-b672-310d7056ec63","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C4:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:54.991 -05:00 INF] Resultado búsqueda usuario: encontrado=true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"9ee2d64f-dcac-4bc6-b672-310d7056ec63","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C4:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:55.146 -05:00 INF] Validación de contraseña con BCrypt para usuario JSANCHEZ: true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"9ee2d64f-dcac-4bc6-b672-310d7056ec63","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C4:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:55.710 -05:00 INF] Login exitoso para usuario: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"9ee2d64f-dcac-4bc6-b672-310d7056ec63","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C4:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:55.792 -05:00 INF] Verificando ruta: /api/chat/conversations {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C4:00000004","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:55.795 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C4:00000004","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:55.799 -05:00 INF] ¿Es ruta pública? false {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C4:00000004","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:55.805 -05:00 INF] Ruta privada detectada: /api/chat/conversations {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C4:00000004","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:55.841 -05:00 INF] Usuario autenticado: Jeysson Sánchez Rodríguez (ID: 1000000001) {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4KML5D4C4:00000004","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:25:55.870 -05:00 INF] GetUserConversationsAsync for user 1000000001 in app SICOM_CHAT_2024 perJur DEFAULT {"SourceContext":"ChatModularMicroservice.Domain.ChatService","ActionId":"5689a743-f947-469d-865b-a948a8b3deaa","ActionName":"ChatModularMicroservice.Api.Controllers.ChatModernController.GetMyConversations (ChatModularMicroservice.Api)","RequestId":"0HNH4KML5D4C4:00000004","RequestPath":"/api/chat/conversations","ConnectionId":"0HNH4KML5D4C4"}
[2025-11-15 20:50:23.505 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 20:50:23.540 -05:00 INF] Servidor escuchando en: http://127.0.0.1:5406 {}
[2025-11-15 20:57:43.182 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 20:57:43.224 -05:00 INF] Servidor escuchando en: http://127.0.0.1:5406 {}
[2025-11-15 20:59:27.583 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 20:59:27.621 -05:00 INF] Servidor escuchando en: http://127.0.0.1:5406 {}
[2025-11-15 21:09:13.897 -05:00 INF] Verificando ruta: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MKHPSBUQ:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4MKHPSBUQ"}
[2025-11-15 21:09:13.909 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MKHPSBUQ:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4MKHPSBUQ"}
[2025-11-15 21:09:13.912 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MKHPSBUQ:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4MKHPSBUQ"}
[2025-11-15 21:09:13.914 -05:00 INF] Ruta pública detectada: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MKHPSBUQ:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4MKHPSBUQ"}
[2025-11-15 21:11:57.641 -05:00 INF] HTTP Request - Method: POST, Path: /api/v1/auth/login, Body: {"cUsuarioCodigo":"JSANCHEZ","cUsuarioContra":"jeysson12345","bRecordarme":false,"cTokenAcceso":"AT_6cbeb6faba662bffb1e9b0cdc3a96670","cTokenSecreto":"ST_0b2c702f3fd200f0fc9ddb02624a21bc9d8be4fa96672504","cPerJurCodigo":"DEFAULT"} {"SourceContext":"ChatModularMicroservice.Api.Middleware.RequestBodyMiddleware","RequestId":"0HNH4MKHPSBUR:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MKHPSBUR"}
[2025-11-15 21:11:57.646 -05:00 INF] Verificando ruta: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MKHPSBUR:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MKHPSBUR"}
[2025-11-15 21:11:57.648 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MKHPSBUR:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MKHPSBUR"}
[2025-11-15 21:11:57.649 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MKHPSBUR:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MKHPSBUR"}
[2025-11-15 21:11:57.651 -05:00 INF] Ruta pública detectada: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MKHPSBUR:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MKHPSBUR"}
[2025-11-15 21:11:59.115 -05:00 INF] Buscando usuario por código: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"014e9f17-f790-4c63-b0cc-56c1b51bd324","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MKHPSBUR:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MKHPSBUR"}
[2025-11-15 21:11:59.733 -05:00 INF] Resultado búsqueda usuario: encontrado=true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"014e9f17-f790-4c63-b0cc-56c1b51bd324","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MKHPSBUR:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MKHPSBUR"}
[2025-11-15 21:12:00.041 -05:00 INF] Validación de contraseña con BCrypt para usuario JSANCHEZ: true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"014e9f17-f790-4c63-b0cc-56c1b51bd324","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MKHPSBUR:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MKHPSBUR"}
[2025-11-15 21:12:00.049 -05:00 INF] Generating access token for user 1000000001 with role:  {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"014e9f17-f790-4c63-b0cc-56c1b51bd324","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MKHPSBUR:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MKHPSBUR"}
[2025-11-15 21:12:00.060 -05:00 INF] Generated token with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jesanchezr@ucvvirtual.edu.pe, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sánchez Rodríguez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:, username:JSANCHEZ, per_codigo:627b8d95-e04b-44c4-8fa6-ccdf14ae1992, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"014e9f17-f790-4c63-b0cc-56c1b51bd324","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MKHPSBUR:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MKHPSBUR"}
[2025-11-15 21:12:00.453 -05:00 INF] Login exitoso para usuario: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"014e9f17-f790-4c63-b0cc-56c1b51bd324","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MKHPSBUR:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MKHPSBUR"}
[2025-11-15 21:18:11.059 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 21:18:11.092 -05:00 INF] Servidor escuchando en: http://127.0.0.1:5281;http://localhost:5281 {}
[2025-11-15 21:18:11.150 -05:00 ERR] Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"SourceContext":"Microsoft.Extensions.Hosting.Internal.Host"}
System.IO.IOException: Failed to bind to address http://127.0.0.1:5281: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
[2025-11-15 21:18:11.167 -05:00 FTL] La aplicación falló al iniciar {}
System.IO.IOException: Failed to bind to address http://127.0.0.1:5281: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.Main(String[] args) in D:\Chat\ChatBackend\ChatModularAPI\03.Layer Api\ChatModularMicroservice.Api\Program.cs:line 168
[2025-11-15 21:18:50.270 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 21:18:50.303 -05:00 INF] Servidor escuchando en: http://localhost:5407 {}
[2025-11-15 21:19:13.768 -05:00 INF] HTTP Request - Method: POST, Path: /api/v1/auth/login, Body: {"cUsuarioCodigo":"JSANCHEZ","cUsuarioContra":"jeysson12345","bRecordarme":false,"cTokenAcceso":"AT_6cbeb6faba662bffb1e9b0cdc3a96670","cTokenSecreto":"ST_0b2c702f3fd200f0fc9ddb02624a21bc9d8be4fa96672504","cPerJurCodigo":"DEFAULT"} {"SourceContext":"ChatModularMicroservice.Api.Middleware.RequestBodyMiddleware","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:13.780 -05:00 INF] Verificando ruta: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:13.782 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:13.785 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:13.789 -05:00 INF] Ruta pública detectada: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:14.836 -05:00 INF] Buscando usuario por código: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:14.842 -05:00 INF] GetByUserCodeAsync: Buscando usuario por código: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:15.010 -05:00 INF] GetByEmailAsync: Buscando usuario por email: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:15.187 -05:00 INF] GetByEmailAsync: Usuario no encontrado por email: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:15.198 -05:00 INF] GetByUsernameAsync: Buscando usuario por username: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:15.382 -05:00 INF] GetByUsernameAsync: Usuario encontrado, rol asignado: USER {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:15.386 -05:00 INF] GetByUserCodeAsync: Encontrado por Username, rol: USER {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:15.390 -05:00 INF] Resultado búsqueda usuario: encontrado=true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:15.706 -05:00 INF] Validación de contraseña con BCrypt para usuario JSANCHEZ: true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:15.713 -05:00 INF] Generating access token for user 1000000001 with role: USER {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:15.733 -05:00 INF] Generated token with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jesanchezr@ucvvirtual.edu.pe, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sánchez Rodríguez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:USER, username:JSANCHEZ, per_codigo:627b8d95-e04b-44c4-8fa6-ccdf14ae1992, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:19:16.133 -05:00 INF] Login exitoso para usuario: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"70edb72a-336a-4b9a-a94e-a4b94adce5bc","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4MQ4II7L6:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4MQ4II7L6"}
[2025-11-15 21:20:16.547 -05:00 INF] Verificando ruta: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MQ4II7L7:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4MQ4II7L7"}
[2025-11-15 21:20:16.550 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MQ4II7L7:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4MQ4II7L7"}
[2025-11-15 21:20:16.553 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MQ4II7L7:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4MQ4II7L7"}
[2025-11-15 21:20:16.554 -05:00 INF] Ruta pública detectada: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4MQ4II7L7:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4MQ4II7L7"}
[2025-11-15 21:23:37.183 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 21:23:37.223 -05:00 INF] Servidor escuchando en: http://localhost:5406 {}
[2025-11-15 22:08:29.387 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 22:08:29.420 -05:00 INF] Servidor escuchando en: http://localhost:5406 {}
[2025-11-15 22:38:51.465 -05:00 INF] HTTP Request - Method: POST, Path: /api/v1/auth/login, Body: {"cUsuarioCodigo":"JSANCHEZ","cUsuarioContra":"jeysson12345","bRecordarme":false,"cTokenAcceso":"AT_6cbeb6faba662bffb1e9b0cdc3a96670","cTokenSecreto":"ST_0b2c702f3fd200f0fc9ddb02624a21bc9d8be4fa96672504","cPerJurCodigo":"DEFAULT"} {"SourceContext":"ChatModularMicroservice.Api.Middleware.RequestBodyMiddleware","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:51.477 -05:00 INF] Verificando ruta: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:51.480 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:51.482 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:51.485 -05:00 INF] Ruta pública detectada: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:53.341 -05:00 INF] Buscando usuario por código: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:53.352 -05:00 INF] GetByUserCodeAsync: Buscando usuario por código: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:53.589 -05:00 INF] GetByEmailAsync: Buscando usuario por email: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:53.770 -05:00 INF] GetByEmailAsync: Usuario no encontrado por email: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:53.781 -05:00 INF] GetByUsernameAsync: Buscando usuario por username: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:53.976 -05:00 INF] GetByUsernameAsync: Usuario encontrado, rol asignado: USER {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:53.982 -05:00 INF] GetByUserCodeAsync: Encontrado por Username, rol: USER {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:53.986 -05:00 INF] Resultado búsqueda usuario: encontrado=true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:54.307 -05:00 INF] Validación de contraseña con BCrypt para usuario JSANCHEZ: true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:54.315 -05:00 INF] Generating access token for user 1000000001 with role: USER {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:54.324 -05:00 INF] Generated token with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jesanchezr@ucvvirtual.edu.pe, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sánchez Rodríguez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:USER, username:JSANCHEZ, per_codigo:627b8d95-e04b-44c4-8fa6-ccdf14ae1992, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:38:54.770 -05:00 INF] Login exitoso para usuario: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"07a7e2d3-7806-4db2-a13e-cd028a60c2a6","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6KE8MR1:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6KE8MR1"}
[2025-11-15 22:39:11.460 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 22:39:11.490 -05:00 INF] Servidor escuchando en: http://localhost:5406 {}
[2025-11-15 22:39:26.673 -05:00 INF] HTTP Request - Method: POST, Path: /api/v1/auth/login, Body: {"cUsuarioCodigo":"JSANCHEZ","cUsuarioContra":"jeysson12345","bRecordarme":true,"cTokenAcceso":"AT_6cbeb6faba662bffb1e9b0cdc3a96670","cTokenSecreto":"ST_0b2c702f3fd200f0fc9ddb02624a21bc9d8be4fa96672504","cPerJurCodigo":"DEFAULT"} {"SourceContext":"ChatModularMicroservice.Api.Middleware.RequestBodyMiddleware","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:26.683 -05:00 INF] Verificando ruta: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:26.686 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:26.688 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:26.690 -05:00 INF] Ruta pública detectada: /api/v1/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:28.030 -05:00 INF] Buscando usuario por código: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:28.035 -05:00 INF] GetByUserCodeAsync: Buscando usuario por código: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:28.280 -05:00 INF] GetByEmailAsync: Buscando usuario por email: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:28.533 -05:00 INF] GetByEmailAsync: Usuario no encontrado por email: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:28.549 -05:00 INF] GetByUsernameAsync: Buscando usuario por username: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:28.812 -05:00 INF] GetByUsernameAsync: Usuario encontrado, rol asignado: USER {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:28.815 -05:00 INF] GetByUserCodeAsync: Encontrado por Username, rol: USER {"SourceContext":"ChatModularMicroservice.Infrastructure.UsuarioRepository","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:28.817 -05:00 INF] Resultado búsqueda usuario: encontrado=true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:29.119 -05:00 INF] Validación de contraseña con BCrypt para usuario JSANCHEZ: true {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:29.126 -05:00 INF] Generating access token for user 1000000001 with role: USER {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:29.137 -05:00 INF] Generated token with claims: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier:1000000001, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress:jesanchezr@ucvvirtual.edu.pe, http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name:Jeysson Sánchez Rodríguez, http://schemas.microsoft.com/ws/2008/06/identity/claims/role:USER, username:JSANCHEZ, per_codigo:627b8d95-e04b-44c4-8fa6-ccdf14ae1992, per_jur_codigo:DEFAULT, user_id:1000000001, app_code:SICOM_CHAT_2024 {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:39:29.583 -05:00 INF] Login exitoso para usuario: JSANCHEZ {"SourceContext":"ChatModularMicroservice.Domain.AuthService","ActionId":"5a5c3c76-01f4-4e6a-9a03-cc596ce983ba","ActionName":"ChatModularMicroservice.Api.Controllers.AuthController.Login (ChatModularMicroservice.Api)","RequestId":"0HNH4O6UU278C:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNH4O6UU278C"}
[2025-11-15 22:43:01.347 -05:00 INF] Verificando ruta: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278D:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278D"}
[2025-11-15 22:43:01.349 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278D:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278D"}
[2025-11-15 22:43:01.351 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278D:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278D"}
[2025-11-15 22:43:01.353 -05:00 INF] Ruta pública detectada: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278D:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278D"}
[2025-11-15 22:44:58.061 -05:00 INF] Verificando ruta: /chathub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278E:00000001","RequestPath":"/chathub","ConnectionId":"0HNH4O6UU278E"}
[2025-11-15 22:44:58.063 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278E:00000001","RequestPath":"/chathub","ConnectionId":"0HNH4O6UU278E"}
[2025-11-15 22:44:58.065 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278E:00000001","RequestPath":"/chathub","ConnectionId":"0HNH4O6UU278E"}
[2025-11-15 22:44:58.067 -05:00 INF] Ruta pública detectada: /chathub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278E:00000001","RequestPath":"/chathub","ConnectionId":"0HNH4O6UU278E"}
[2025-11-15 22:55:25.415 -05:00 INF] Verificando ruta: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278H:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278H"}
[2025-11-15 22:55:25.418 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278H:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278H"}
[2025-11-15 22:55:25.421 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278H:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278H"}
[2025-11-15 22:55:25.423 -05:00 INF] Ruta pública detectada: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278H:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278H"}
[2025-11-15 22:56:25.939 -05:00 INF] HTTP Request - Method: POST, Path: /api/auth/login, Body: {"cUsuarioCodigo":"KSANCHEZ","cUsuarioPassword":"123456","cAplicacionCodigo":"SICOM_CHAT_2024","cAplicacionAccessToken":"acc3sst0k3n2024","cAplicacionSecretToken":"s3cr3tt0k3n2024"} {"SourceContext":"ChatModularMicroservice.Api.Middleware.RequestBodyMiddleware","RequestId":"0HNH4O6UU278I:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNH4O6UU278I"}
[2025-11-15 22:56:25.947 -05:00 INF] Verificando ruta: /api/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278I:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNH4O6UU278I"}
[2025-11-15 22:56:25.950 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278I:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNH4O6UU278I"}
[2025-11-15 22:56:25.952 -05:00 INF] ¿Es ruta pública? false {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278I:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNH4O6UU278I"}
[2025-11-15 22:56:25.954 -05:00 INF] Ruta privada detectada: /api/auth/login {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278I:00000001","RequestPath":"/api/auth/login","ConnectionId":"0HNH4O6UU278I"}
[2025-11-15 23:11:07.999 -05:00 INF] Verificando ruta: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278J:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278J"}
[2025-11-15 23:11:08.001 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chatHub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278J:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278J"}
[2025-11-15 23:11:08.004 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278J:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278J"}
[2025-11-15 23:11:08.007 -05:00 INF] Ruta pública detectada: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4O6UU278J:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4O6UU278J"}
[2025-11-15 23:14:39.939 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 23:14:39.969 -05:00 INF] Servidor escuchando en: http://127.0.0.1:5281;http://localhost:5281 {}
[2025-11-15 23:14:40.023 -05:00 ERR] Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"SourceContext":"Microsoft.Extensions.Hosting.Internal.Host"}
System.IO.IOException: Failed to bind to address http://127.0.0.1:5281: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
[2025-11-15 23:14:40.036 -05:00 FTL] La aplicación falló al iniciar {}
System.IO.IOException: Failed to bind to address http://127.0.0.1:5281: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.Main(String[] args) in D:\Chat\ChatBackend\ChatModularAPI\03.Layer Api\ChatModularMicroservice.Api\Program.cs:line 168
[2025-11-15 23:16:00.298 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 23:16:00.330 -05:00 INF] Servidor escuchando en: http://127.0.0.1:5281;http://localhost:5281 {}
[2025-11-15 23:16:00.397 -05:00 ERR] Hosting failed to start {"EventId":{"Id":11,"Name":"HostedServiceStartupFaulted"},"SourceContext":"Microsoft.Extensions.Hosting.Internal.Host"}
System.IO.IOException: Failed to bind to address http://127.0.0.1:5281: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
[2025-11-15 23:16:00.410 -05:00 FTL] La aplicación falló al iniciar {}
System.IO.IOException: Failed to bind to address http://127.0.0.1:5281: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
 ---> System.Net.Sockets.SocketException (10048): Solo se permite un uso de cada dirección de socket (protocolo/dirección de red/puerto)
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.Main(String[] args) in D:\Chat\ChatBackend\ChatModularAPI\03.Layer Api\ChatModularMicroservice.Api\Program.cs:line 168
[2025-11-15 23:18:24.541 -05:00 INF] Iniciando aplicación ChatModular API {}
[2025-11-15 23:18:24.577 -05:00 INF] Servidor escuchando en: http://localhost:5406 {}
[2025-11-15 23:18:48.448 -05:00 INF] Verificando ruta: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4OSUPRCA7:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4OSUPRCA7"}
[2025-11-15 23:18:48.458 -05:00 INF] Rutas públicas configuradas: /, /api/v1/auth/login, /api/v1/auth/register, /api/v1/auth/status, /api/v1/auth/generar-tokens-aplicacion, /api/v1/auth/validar-access-token, /api/v1/auth/renovar-tokens, /api/v1/auth/revocar-tokens, /api/v1/auth/tokens-aplicacion, /api/v1/aplicaciones, /swagger, /swagger/index.html, /swagger/v1/swagger.json, /api/docs, /chathub {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4OSUPRCA7:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4OSUPRCA7"}
[2025-11-15 23:18:48.461 -05:00 INF] ¿Es ruta pública? true {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4OSUPRCA7:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4OSUPRCA7"}
[2025-11-15 23:18:48.464 -05:00 INF] Ruta pública detectada: /chathub/negotiate {"SourceContext":"ChatModularMicroservice.Api.Middleware.AuthValidationMiddleware","RequestId":"0HNH4OSUPRCA7:00000001","RequestPath":"/chathub/negotiate","ConnectionId":"0HNH4OSUPRCA7"}
